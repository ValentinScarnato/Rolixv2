@page
@model Rolix.Web.Pages.IndexModel
@{
    ViewData["Title"] = "Rolix - L'Excellence Horlogère";
}

<div class="maison-hero">
    <div class="maison-hero-overlay"></div>
    <img src="https://images.unsplash.com/photo-1600003014637-ff82a275e191?q=80&w=1011&auto=format&fit=crop" 
         alt="Mécanisme Rolix" class="maison-hero-bg parallax-img">

    <div class="maison-hero-content">
        <h1 class="hero-title">Le Temps, <br> Sublimé.</h1>
        <p class="subtitle fade-in-up delay-200">Perpétuer l'excellence depuis 1905</p>

        <div class="hero-buttons fade-in-up delay-400">
            <a asp-page="/Products/Index" class="btn-primary">
                Voir la collection
            </a>
            <a asp-page="/About" class="btn-secondary-glass">
                Notre histoire
            </a>
        </div>

        <div class="scroll-indicator fade-in-up delay-600">
            <div class="line"></div>
        </div>
    </div>
</div>

<div class="main-container" style="padding-top: 0;">

    <section id="notre-histoire" class="luxury-split-section reveal-on-scroll">
        <div class="split-image-wrapper">
            <img src="https://images.unsplash.com/photo-1622434641406-a158123450f9?q=80&w=1404&auto=format&fit=crop" alt="Atelier Horloger">
            <div class="floating-frame"></div>
        </div>
        <div class="split-text-content">
            <span class="chapter-title">Chapitre I</span>
            <h2>Une Vision Perpétuelle</h2>
            <p>
                Tout commence par une quête d'absolu. Fondée au début du XXe siècle, la Maison Rolix n'a eu de cesse de repousser les limites de la précision chronométrique.
            </p>
            <p>
                Plus qu'une montre, nous façonnons des instruments destinés à accompagner les explorateurs, les visionnaires et ceux qui façonnent le monde de demain.
            </p>
        </div>
    </section>

    <section class="quote-section reveal-on-scroll">
        <div class="quote-icon">“</div>
        <h3>
            Nous ne construisons pas seulement des montres.<br>
            Nous gardons la mesure de vos instants les plus précieux.
        </h3>
        <span class="quote-author">— Henri Rolix, Fondateur</span>
    </section>

    <section class="luxury-split-section reverse reveal-on-scroll">
        <div class="split-text-content">
            <span class="chapter-title">Chapitre II</span>
            <h2>L'Or & La Main</h2>
            <p>
                Dans le secret de nos ateliers genevois, chaque composant est poli, assemblé et contrôlé à la main. L'éclat de notre or 18 carats, fondu dans nos propres fonderies, est unique.
            </p>
            <p>
                Cette alchimie entre tradition artisanale et technologie de pointe donne naissance à une esthétique inaltérable.
            </p>
        </div>
        <div class="split-image-wrapper">
            <img src="https://images.unsplash.com/photo-1614164185128-e4ec99c436d7?q=80&w=1374&auto=format&fit=crop" alt="Orfèvrerie">
            <div class="floating-frame frame-gold"></div>
        </div>
    </section>

    <section class="gallery-section reveal-on-scroll" style="margin-top: 100px;">
        <span class="since-badge" style="margin-bottom: 20px; display:inline-block;">Haute Horlogerie</span>
        <h2 style="margin-bottom: 60px;">Collection Prestige</h2>

        @if (Model.TopProducts.Count > 0)
        {
                <div class="products-grid">
                @foreach (var product in Model.TopProducts)
                {
                            <a asp-page="/Products/Details" asp-route-id="@product.Id" class="product-card-link">
                                <div class="product-card-luxury">
                                    <div class="card-badge">Exception</div>

                                    <div class="card-image-wrapper">
                                @if (!string.IsNullOrEmpty(product.ImageBase64))
                                {
                                                <img src="@product.ImageBase64" alt="@product.Name" />
                                }
                                else
                                {
                                                <div style="color:rgba(255,255,255,0.3)">Image indisponible</div>
                                }
                                    </div>

                                    <div class="card-info">
                                        <h3>@product.Name</h3>
                                        <div class="card-separator"></div>

                                        <p style="font-size: 0.9rem; color: rgba(255,255,255,0.6); margin-bottom: 15px; height: 3.6em; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;">
                                    @(product.Description ?? "L'élégance intemporelle.")
                                        </p>

                                        <p class="price">@product.Price.ToString("C0", System.Globalization.CultureInfo.CreateSpecificCulture("fr-FR"))</p>
                                        <span class="view-btn">Explorer ce modèle</span>
                                    </div>
                                </div>
                            </a>
                }
                </div>
        }
        else
        {
                <div class="empty-state">
                    <p>La collection est momentanément indisponible.</p>
                </div>
        }

        <div style="text-align: center; margin-top: 60px;">
            <a asp-page="/Products/Index" class="btn-secondary-glass">Découvrir toute la collection</a>
        </div>
    </section>

    <div class="marquee-wrapper reveal-on-scroll">
        <div class="marquee-container">
            <div class="marquee-content">
                <span class="marquee-item">PRECISION</span>
                <span class="separator">✦</span>
                <span class="marquee-item">ELEGANCE</span>
                <span class="separator">✦</span>
                <span class="marquee-item">HERITAGE</span>
                <span class="separator">✦</span>
                <span class="marquee-item">SWISS MADE</span>
                <span class="separator">✦</span>
                <span class="marquee-item">PRECISION</span>
                <span class="separator">✦</span>
                <span class="marquee-item">ELEGANCE</span>
                <span class="separator">✦</span>
                <span class="marquee-item">HERITAGE</span>
                <span class="separator">✦</span>
                <span class="marquee-item">SWISS MADE</span>
            </div>
        </div>
    </div>

</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.reveal-on-scroll').forEach(el => observer.observe(el));
    });
</script>