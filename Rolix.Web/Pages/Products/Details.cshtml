@page
@model Rolix.Web.Pages.Products.DetailsModel
@{
    ViewData["Title"] = Model.Product?.Name;
}

<div class="ambient-light light-1" style="top: -20%; left: 20%; width: 600px; height: 600px; opacity: 0.4;"></div>

@if (Model.Product != null)
{
    <div class="product-page-shell">
        <div class="navigation-wrapper">
            <a asp-page="/Products/Index" class="btn-back-catalog">&larr; Retour au catalogue</a>

            <div class="breadcrumb-chip">
                <span class="dot"></span>
                Fiche détaillée
            </div>
        </div>

        @if (TempData["QuoteSuccess"] is string quoteMessage)
        {
            <div class="alert alert-success">@quoteMessage</div>
        }

        <div class="product-hero-card">
            <div class="product-visual-panel">
                <div class="product-flag">Montre de collection</div>

                @if (!string.IsNullOrEmpty(Model.Product.ImageBase64))
                {
                    <img src="@Model.Product.ImageBase64" alt="@Model.Product.Name" class="product-visual" />
                }
                else
                {
                    <div class="product-visual placeholder">
                        <span>Pas d'image disponible</span>
                    </div>
                }

                <div class="visual-overlay"></div>
            </div>

            <div class="product-summary-panel">
                <p class="eyebrow">Référence interne</p>
                <h1 class="product-title">@Model.Product.Name</h1>

                <p class="product-lead">
                    @(string.IsNullOrWhiteSpace(Model.Product.Description)
                        ? "Un modèle emblématique prêt à rejoindre votre collection."
                        : Model.Product.Description)
                </p>

                <div class="price-row">
                    <div>
                        <p class="price-label">Prix public indicatif</p>
                        <p class="price-value">@Model.Product.Price.ToString("C0", System.Globalization.CultureInfo.CreateSpecificCulture("fr-FR"))</p>
                        <p class="tax-label">TVA incluse</p>
                    </div>
                    <div class="price-meta">
                        <span>Disponibilité sur demande</span>
                        <span>Entretien atelier certifié</span>
                    </div>
                </div>

                <div class="spec-row">
                    <div>
                        <p class="spec-label">Mouvement</p>
                        <p class="spec-value">Perpetual automatique</p>
                    </div>
                    <div>
                        <p class="spec-label">Étanchéité</p>
                        <p class="spec-value">100 m</p>
                    </div>
                    <div>
                        <p class="spec-label">Boîtier</p>
                        <p class="spec-value">Acier Oystersteel</p>
                    </div>
                </div>

                <form method="post" asp-page-handler="Quote" class="quote-form expanded">
                    <input type="hidden" name="id" value="@Model.Product.Id" />
                    <button type="submit" class="btn-primary-large">Demander un devis</button>
                    <p class="muted fine-print">Nos conseillers confirment la disponibilité et vous recontactent sous 24h.</p>
                </form>

                <div class="trust-signals">
                    <span><span class="accent-check">✔</span> Garantie internationale 5 ans</span>
                    <span><span class="accent-check">✔</span> Livraison sécurisée et assurée</span>
                    <span><span class="accent-check">✔</span> Atelier d'entretien certifié</span>
                </div>
            </div>
        </div>

        <div class="product-detail-grid">
            <section class="detail-card">
                <div class="card-header">
                    <p class="eyebrow">Présentation</p>
                    <h3>Ce qui rend ce modèle unique</h3>
                </div>
                <p class="muted">
                    @(string.IsNullOrWhiteSpace(Model.Product.Description)
                        ? "Une silhouette équilibrée, des finitions brossées et polies, et un calibre maison conçu pour durer."
                        : Model.Product.Description)
                </p>
                <ul class="feature-list">
                    <li>Réserve de marche optimisée pour un port quotidien.</li>
                    <li>Bracelet ergonomique et boucle déployante sécurisée.</li>
                    <li>Contrôle qualité en 7 points avant expédition.</li>
                </ul>
            </section>

            <section class="detail-card">
                <div class="card-header">
                    <p class="eyebrow">Spécifications clés</p>
                    <h3>Pour les passionnés</h3>
                </div>
                <div class="spec-grid">
                    <div>
                        <p class="spec-label">Diamètre</p>
                        <p class="spec-value">41 mm</p>
                    </div>
                    <div>
                        <p class="spec-label">Verre</p>
                        <p class="spec-value">Saphir antireflet</p>
                    </div>
                    <div>
                        <p class="spec-label">Index</p>
                        <p class="spec-value">Appliqués luminescents</p>
                    </div>
                    <div>
                        <p class="spec-label">Étanchéité</p>
                        <p class="spec-value">100 mètres</p>
                    </div>
                </div>
                <div class="service-strip">
                    <div>
                        <p class="spec-label">Services</p>
                        <p class="spec-value">Essayage privé & livraison sécurisée</p>
                    </div>
                    <div>
                        <p class="spec-label">Support</p>
                        <p class="spec-value">Conciergerie dédiée 6j/7</p>
                    </div>
                </div>
            </section>
        </div>
    </div>
}
else
{
        <div style="text-align: center; margin-top: 100px; color: white;">
            <h2>Produit introuvable.</h2>
            <a asp-page="/Products/Index" class="btn-primary" style="margin-top: 20px;">Retour à la collection</a>
        </div>
}
