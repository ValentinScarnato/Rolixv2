@page
@model Rolix.Web.Pages.Products.DetailsModel
@{
    ViewData["Title"] = Model.Product?.Name;
}

<div class="ambient-light light-1" style="top: -20%; left: 20%; width: 600px; height: 600px; opacity: 0.4;"></div>

@if (Model.Product != null)
{
    <div class="product-details-container">

        @if (TempData["QuoteSuccess"] is string quoteMessage)
        {
            <div class="alert alert-success" style="margin-bottom: 20px;">@quoteMessage</div>
        }

        <div class="product-details-card fade-in-up">

            <div class="product-image-wrapper">

                <a asp-page="/Products/Index" class="btn-back-catalog">
                    &larr; Retour au catalogue
                </a>

                <div class="watch-glow"></div>

                @if (!string.IsNullOrEmpty(Model.Product.ImageBase64))
                {
                    <img src="@Model.Product.ImageBase64"
                         alt="@Model.Product.Name"
                         class="product-details-image" />
                }
                else
                {
                    <div class="product-details-image-placeholder">
                        <span>Pas d'image</span>
                    </div>
                }

                <div class="specs-grid fade-in-up delay-600">
                    <div class="spec-item">
                        <span class="spec-label">Diamètre</span>
                        <span class="spec-value">41 mm</span>
                    </div>
                    <div class="spec-item">
                        <span class="spec-label">Matériau</span>
                        <span class="spec-value">Oystersteel</span>
                    </div>
                    <div class="spec-item">
                        <span class="spec-label">Mouvement</span>
                        <span class="spec-value">Perpetual</span>
                    </div>
                    <div class="spec-item">
                        <span class="spec-label">Étanchéité</span>
                        <span class="spec-value">100 mètres</span>
                    </div>
                </div>
            </div>

            <div class="product-details-info">

                <div class="fade-in-up delay-200">
                    <span class="product-reference">Réf. 126233 (Exemple)</span>
                    <h1 class="product-title">@Model.Product.Name</h1>

                    <div class="price-wrapper">
                        <span class="price">
                            @Model.Product.Price.ToString("C0", System.Globalization.CultureInfo.CreateSpecificCulture("fr-FR"))
                        </span>
                        <span class="tax-label">TVA incluse</span>
                    </div>
                </div>

                <div class="separator-line fade-in-up delay-400"></div>

                <div class="description-block fade-in-up delay-400">
                    @if (!string.IsNullOrEmpty(Model.Product.Description))
                    {
                        <h3>L'Esprit du Modèle</h3>
                        <p class="description">@Model.Product.Description</p>
                    }
                    else
                    {
                        <h3>Description</h3>
                        <p class="description muted">Aucune description n'est disponible pour ce modèle.</p>
                    }
                </div>

                <div class="action-block fade-in-up delay-600">
                    <form method="post" asp-page-handler="Quote" class="quote-form">
                        <input type="hidden" name="id" value="@Model.Product.Id" />
                        <button type="submit" class="btn-primary-large">
                            Demander un devis
                        </button>
                    </form>

                    <div class="trust-signals">
                        <span><span style="color:var(--accent-gold);">✔</span> Garantie 5 ans</span>
                        <span><span style="color:var(--accent-gold);">✔</span> Livraison Sécurisée</span>
                    </div>
                </div>

            </div>
        </div>
    </div>
}
else
{
    <div style="text-align: center; margin-top: 100px; color: white;">
        <h2>Produit introuvable.</h2>
        <a asp-page="/Products/Index" class="btn-primary" style="margin-top: 20px;">Retour à la collection</a>
    </div>
}